<!--
    Daltro Augusto's Portfolio
    Copyright (C) 2021  Daltro Augusto

    This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.

    You should have received a copy of the GNU General Public License along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<html>

<head>
  <style>
    object {
      display: none;
    }
  </style>

  <script defer>
    window.addEventListener('load', function () {
      const $ = (e) => document.querySelector(e);
      
      $('form#protectedArticle').addEventListener('submit', event => {
        event.preventDefault();

        const passwdinput = $('#passwd').value.toString();

        argon2.verify({
          pass: passwdinput,
          encoded: '$argon2d$v=19$m=1024,t=1,p=1$YXNzaXN0dG8$Rn7vBUf98MN5YVq6ZNTuoJHmkR71lgobB42xQAIpLAjTOgFf4OPvJ/jDTauIjqKHIWvgqNDGp4NqSsNJiW4OGMDBlrOzMJkGRKr7jKLJjwpNY52/GkBsYplnhhvK9ew/l/Wb0vGRGqo+fb3SLgrhSsRPkyevKddzLB1+1bXbfqt/xUvcI24dpO/OYknF6hQNtQ6j8t8FClBbgpbyLXPTbcAMgpR0EMfQuFOmIfTQNP5bE+TnSSd/2+Kj0YsHB8uclB8TB5zWL3bfQRZKk3kD71OObt0kBk4WYGkG6gJBI0/BR+q6X0QINmJ+wh9BkflxhFvtcZEdcG7Y07uARbh/XA'
        })
          .then((passwd = passwdinput) => {
            const encrypted = $('object').innerHTML;
            const bytes = CryptoJS.AES.decrypt(encrypted, passwd);
            const content = bytes.toString(CryptoJS.enc.Utf8);

            $('#wrap').innerHTML += content;
            $('form').outerHTML = '';
          })
          .catch(e => {
            window.alert('Senha incorreta!');
          });
      });
    });
  </script>
</head>

<body>
  <form id="protectedArticle">
    <label for="passwd">Digite sua senha:</label>
    <br />
    <input type="password" id="passwd" type="text" />
    <input type="submit" value="Acessar" />
  </form>

  <div id="wrap">

  </div>

  <object>U2FsdGVkX1/wxbE7TEMWnD6aU8iF2Z24j93dKOs2fErTTnfi4RuIzEoh88n/ItIq7K0UCUKfNCKlFkUc7Z/05kJXiyf6CG9uiVXqNvkdQz4=</object>
</body>

</html>